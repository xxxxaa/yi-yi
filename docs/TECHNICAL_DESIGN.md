# ç‰©æ–™è§£æä¸å†…å®¹ç”Ÿæˆ - æŠ€æœ¯è®¾è®¡æ–‡æ¡£

## ä¸€ã€ç‰©æ–™è§£æç³»ç»Ÿ

### 1.1 è§£ææµç¨‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç‰©æ–™ä¸Šä¼ å…¥å£                            â”‚
â”‚         æ‹–æ‹½ä¸Šä¼  / æ–‡ä»¶é€‰æ‹© / æ‰¹é‡å¯¼å…¥                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ–‡ä»¶é¢„å¤„ç†                              â”‚
â”‚  - æ ¼å¼æ£€æµ‹                                                 â”‚
â”‚  - æ–‡ä»¶æ ¡éªŒ                                                 â”‚
â”‚  - ä¸´æ—¶å­˜å‚¨                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç±»å‹è·¯ç”±å™¨                              â”‚
â”‚  æ ¹æ®æ–‡ä»¶ç±»å‹åˆ†å‘åˆ°å¯¹åº”çš„è§£æå™¨                              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚         â”‚         â”‚         â”‚         â”‚
     â–¼         â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PDFè§£æ â”‚â”‚å›¾ç‰‡è§£æâ”‚â”‚è§†é¢‘è§£æâ”‚â”‚éŸ³é¢‘è§£æâ”‚â”‚è¡¨æ ¼è§£æâ”‚
â”‚  å™¨    â”‚â”‚  å™¨    â”‚â”‚  å™¨    â”‚â”‚  å™¨    â”‚â”‚  å™¨    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚         â”‚         â”‚         â”‚         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI ä¿¡æ¯æå–                               â”‚
â”‚  - ç»“æ„åŒ–ä¿¡æ¯æå–                                           â”‚
â”‚  - å–ç‚¹è¯†åˆ«                                                 â”‚
â”‚  - å…³é”®æ•°æ®æŠ½å–                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨                                  â”‚
â”‚  - æ–‡ä»¶å­˜å‚¨                                                 â”‚
â”‚  - ç»“æ„åŒ–æ•°æ®å…¥åº“                                           â”‚
â”‚  - å‘é‡ç´¢å¼•æ„å»º                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å„ç±»å‹è§£æå™¨è¯¦ç»†è®¾è®¡

#### 1.2.1 PDFè§£æå™¨

**è¾“å…¥**: PDFæ–‡ä»¶ï¼ˆæ¥¼ä¹¦ã€æˆ·å‹å†Œã€ä»·æ ¼è¡¨ç­‰ï¼‰

**å¤„ç†æµç¨‹**:
```
1. PDFè§£æ
   - ä½¿ç”¨ pdf-parse æå–æ–‡æœ¬
   - ä½¿ç”¨ pdf2pic æå–å›¾ç‰‡
   - è¯†åˆ«è¡¨æ ¼ç»“æ„

2. å†…å®¹åˆ†ç±»
   - å°é¢ä¿¡æ¯
   - æ¥¼ç›˜ä»‹ç»
   - æˆ·å‹é¡µé¢
   - é…å¥—è¯´æ˜
   - ä»·æ ¼ä¿¡æ¯

3. AIæå–
   - å‘é€ç»™Claudeè¿›è¡Œç»“æ„åŒ–æå–
   - è¿”å›JSONæ ¼å¼æ•°æ®
```

**è¾“å‡ºç»“æ„**:
```json
{
  "document_type": "æ¥¼ä¹¦",
  "project_info": {
    "name": "xxxèŠ±å›­",
    "developer": "xxxåœ°äº§",
    "address": "xxxè·¯xxxå·"
  },
  "house_types": [
    {
      "name": "Aæˆ·å‹",
      "rooms": 3,
      "area": "89-95ã¡",
      "features": ["å—åŒ—é€šé€", "ä¸»å§å¸¦é£˜çª—"]
    }
  ],
  "facilities": {
    "traffic": ["åœ°é“xå·çº¿xxxç«™"],
    "education": ["xxxå°å­¦"],
    "commercial": ["xxxå•†åœº"]
  },
  "images": [
    {"type": "æ•ˆæœå›¾", "path": "xxx.jpg"},
    {"type": "æˆ·å‹å›¾", "path": "xxx.jpg"}
  ]
}
```

#### 1.2.2 å›¾ç‰‡è§£æå™¨

**è¾“å…¥**: JPG/PNGå›¾ç‰‡ï¼ˆæˆ·å‹å›¾ã€æ•ˆæœå›¾ã€åŒºä½å›¾ç­‰ï¼‰

**å¤„ç†æµç¨‹**:
```
1. å›¾ç‰‡åˆ†ç±»ï¼ˆAIè§†è§‰è¯†åˆ«ï¼‰
   - æˆ·å‹å›¾ â†’ æˆ·å‹è§£ææµç¨‹
   - æ•ˆæœå›¾ â†’ åœºæ™¯æ ‡ç­¾æå–
   - åŒºä½å›¾ â†’ é…å¥—ä¿¡æ¯æå–
   - ä»·æ ¼è¡¨å›¾ç‰‡ â†’ OCR+è¡¨æ ¼è§£æ

2. æˆ·å‹å›¾è§£æ
   - OCRè¯†åˆ«æ–‡å­—ï¼ˆé¢ç§¯ã€æœå‘ã€æˆ¿é—´æ ‡æ³¨ï¼‰
   - è¯†åˆ«æˆ¿é—´å¸ƒå±€
   - æå–æˆ·å‹ç‰¹ç‚¹

3. æ•ˆæœå›¾è§£æ
   - åœºæ™¯è¯†åˆ«ï¼ˆå®¢å…/å§å®¤/å¤–ç«‹é¢ç­‰ï¼‰
   - é£æ ¼è¯†åˆ«ï¼ˆç°ä»£/ä¸­å¼/æ¬§å¼ç­‰ï¼‰
   - ç”Ÿæˆæè¿°æ ‡ç­¾

4. åŒºä½å›¾è§£æ
   - OCRè¯†åˆ«åœ°æ ‡åç§°
   - è¯†åˆ«è·ç¦»ä¿¡æ¯
   - æå–é…å¥—åˆ—è¡¨
```

**æˆ·å‹å›¾è¾“å‡º**:
```json
{
  "image_type": "æˆ·å‹å›¾",
  "house_type": {
    "layout": "3å®¤2å…2å«",
    "area": "95ã¡",
    "orientation": "å—åŒ—",
    "rooms": [
      {"name": "ä¸»å§", "area": "15ã¡", "features": ["æœå—", "å¸¦é£˜çª—"]},
      {"name": "å®¢å…", "area": "28ã¡", "features": ["æœå—", "è¿æ¥é˜³å°"]}
    ],
    "highlights": ["å—åŒ—é€šé€", "åŠ¨é™åˆ†ç¦»", "å…¨æ˜æˆ·å‹"]
  }
}
```

#### 1.2.3 è§†é¢‘è§£æå™¨

**è¾“å…¥**: MP4/MOVè§†é¢‘ï¼ˆæ ·æ¿é—´è§†é¢‘ã€å®£ä¼ ç‰‡ç­‰ï¼‰

**å¤„ç†æµç¨‹**:
```
1. è§†é¢‘é¢„å¤„ç†
   - æå–éŸ³é¢‘è½¨é“
   - æŒ‰é—´éš”æå–å…³é”®å¸§ï¼ˆæ¯5ç§’ï¼‰

2. éŸ³é¢‘å¤„ç†
   - Whisperè¯­éŸ³è½¬æ–‡å­—
   - æå–è§£è¯´è¯å†…å®¹

3. å…³é”®å¸§åˆ†æ
   - åœºæ™¯è¯†åˆ«
   - æ–‡å­—OCR
   - ç”Ÿæˆå¸§æè¿°

4. å†…å®¹æ•´åˆ
   - æ—¶é—´è½´å¯¹é½
   - ç”Ÿæˆè§†é¢‘æ‘˜è¦
```

**è¾“å‡ºç»“æ„**:
```json
{
  "duration": "3:25",
  "transcript": "æ¬¢è¿æ¥åˆ°xxxèŠ±å›­æ ·æ¿é—´...",
  "scenes": [
    {"time": "0:00-0:30", "scene": "å¤–ç«‹é¢", "description": "ç°ä»£ç®€çº¦é£æ ¼å¤–ç«‹é¢"},
    {"time": "0:30-1:20", "scene": "å®¢å…", "description": "æŒ‘é«˜å®¢å…ï¼Œè½åœ°çª—è®¾è®¡"}
  ],
  "key_points": [
    "ç²¾è£…äº¤ä»˜",
    "270Â°ç¯å¹•å®¢å…",
    "ä¸»å§å¥—æˆ¿è®¾è®¡"
  ]
}
```

#### 1.2.4 è¡¨æ ¼è§£æå™¨

**è¾“å…¥**: Excel/CSV/å›¾ç‰‡è¡¨æ ¼ï¼ˆä»·æ ¼è¡¨ã€æˆ¿æºè¡¨ç­‰ï¼‰

**å¤„ç†æµç¨‹**:
```
1. æ ¼å¼å¤„ç†
   - Excel: xlsxåº“ç›´æ¥è§£æ
   - å›¾ç‰‡: OCR + è¡¨æ ¼ç»“æ„è¯†åˆ«

2. è¡¨æ ¼ç»“æ„åŒ–
   - è¯†åˆ«è¡¨å¤´
   - è§£ææ•°æ®è¡Œ
   - æ•°æ®ç±»å‹æ¨æ–­

3. è¯­ä¹‰ç†è§£
   - AIç†è§£è¡¨æ ¼å«ä¹‰
   - å­—æ®µæ˜ å°„åˆ°æ ‡å‡†ç»“æ„
```

**ä»·æ ¼è¡¨è¾“å‡º**:
```json
{
  "table_type": "ä»·æ ¼è¡¨",
  "update_date": "2026-02-01",
  "units": [
    {
      "building": "1æ ‹",
      "unit": "1å•å…ƒ",
      "floor": 15,
      "room": "1501",
      "house_type": "Aæˆ·å‹",
      "area": 95.5,
      "unit_price": 25000,
      "total_price": 2387500,
      "status": "åœ¨å”®"
    }
  ]
}
```

### 1.3 AIæå–Promptè®¾è®¡

#### æ¥¼ç›˜ä¿¡æ¯æå–Prompt

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æˆ¿äº§ä¿¡æ¯æå–åŠ©æ‰‹ã€‚è¯·ä»ä»¥ä¸‹å†…å®¹ä¸­æå–æ¥¼ç›˜ä¿¡æ¯ï¼Œä»¥JSONæ ¼å¼è¿”å›ã€‚

éœ€è¦æå–çš„ä¿¡æ¯ï¼š
1. æ¥¼ç›˜åŸºç¡€ä¿¡æ¯ï¼ˆåç§°ã€å¼€å‘å•†ã€åœ°å€ã€ç‰©ä¸šç±»å‹ã€äº§æƒå¹´é™ã€äº¤æˆ¿æ—¶é—´ï¼‰
2. æˆ·å‹ä¿¡æ¯ï¼ˆæˆ·å‹åç§°ã€é¢ç§¯ã€æœå‘ã€ä»·æ ¼ã€ç‰¹ç‚¹ï¼‰
3. é…å¥—ä¿¡æ¯ï¼ˆäº¤é€šã€æ•™è‚²ã€å•†ä¸šã€åŒ»ç–—ã€ä¼‘é—²ï¼‰
4. æ ¸å¿ƒå–ç‚¹ï¼ˆ3-5ä¸ªæœ€çªå‡ºçš„å–ç‚¹ï¼‰

å¦‚æœæŸé¡¹ä¿¡æ¯æœªæåŠï¼Œè¿”å›nullã€‚

å†…å®¹ï¼š
{content}

è¯·è¿”å›JSONæ ¼å¼ï¼š
```

#### æˆ·å‹å›¾è§£æPrompt

```
è¯·åˆ†æè¿™å¼ æˆ·å‹å›¾ï¼Œæå–ä»¥ä¸‹ä¿¡æ¯ï¼š

1. æˆ·å‹å¸ƒå±€ï¼ˆå‡ å®¤å‡ å…å‡ å«ï¼‰
2. å»ºç­‘é¢ç§¯
3. æœå‘
4. å„æˆ¿é—´ä¿¡æ¯ï¼ˆåç§°ã€å¤§æ¦‚é¢ç§¯ã€ç‰¹ç‚¹ï¼‰
5. æˆ·å‹äº®ç‚¹ï¼ˆå¦‚å—åŒ—é€šé€ã€åŠ¨é™åˆ†ç¦»ç­‰ï¼‰

ä»¥JSONæ ¼å¼è¿”å›ç»“æœã€‚
```

---

## äºŒã€å†…å®¹ç”Ÿæˆç³»ç»Ÿ

### 2.1 ç”Ÿæˆæµç¨‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·è¾“å…¥                                â”‚
â”‚  é€‰æ‹©æ¥¼ç›˜ â†’ é€‰æ‹©å†…å®¹ç±»å‹ â†’ é…ç½®å‚æ•°                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç‰©æ–™æ£€ç´¢                                  â”‚
â”‚  - åŠ è½½æ¥¼ç›˜åŸºç¡€ä¿¡æ¯                                         â”‚
â”‚  - æ£€ç´¢ç›¸å…³ç‰©æ–™                                             â”‚
â”‚  - æ„å»ºä¸Šä¸‹æ–‡                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Promptæ„å»º                                â”‚
â”‚  - é€‰æ‹©å¯¹åº”æ¨¡æ¿                                             â”‚
â”‚  - æ³¨å…¥æ¥¼ç›˜ä¿¡æ¯                                             â”‚
â”‚  - åº”ç”¨é£æ ¼å‚æ•°                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AIç”Ÿæˆ                                    â”‚
â”‚  - è°ƒç”¨Claude API                                           â”‚
â”‚  - æµå¼è¾“å‡º                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åå¤„ç†                                    â”‚
â”‚  - æ ¼å¼åŒ–è¾“å‡º                                               â”‚
â”‚  - æ•æ„Ÿè¯æ£€æŸ¥                                               â”‚
â”‚  - ä¿å­˜è®°å½•                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å†…å®¹æ¨¡æ¿è®¾è®¡

#### 2.2.1 å°çº¢ä¹¦æ¨æ–‡æ¨¡æ¿

**æ¨¡æ¿ç»“æ„**:
```yaml
template_id: xiaohongshu_tanpan
name: æ¢ç›˜ç¬”è®°
description: ä»¥ç¬¬ä¸€äººç§°æ¢ç›˜è§†è§’çš„ç§è‰ç¬”è®°

structure:
  title:
    format: "emoji + å¸ç›æ ‡é¢˜"
    max_length: 20
    examples:
      - "ğŸ å‘ç°å®è—æ¥¼ç›˜ï¼{area}åˆšéœ€ç¦éŸ³"
      - "ğŸ’°æ€»ä»·{price}ä¸‡ä¸Šè½¦{city}åœ°é“æˆ¿"

  body:
    sections:
      - name: å¼€åœº
        description: å¼•å…¥è¯é¢˜ï¼Œåˆ¶é€ å¥½å¥‡
        length: 50-100å­—

      - name: æ¥¼ç›˜ä»‹ç»
        description: ä½ç½®ã€å¼€å‘å•†ã€åŸºæœ¬ä¿¡æ¯
        length: 100-150å­—

      - name: æˆ·å‹åˆ†æ
        description: ä¸»æ¨æˆ·å‹è¯¦ç»†ä»‹ç»
        length: 150-200å­—

      - name: é…å¥—è¯´æ˜
        description: äº¤é€šã€å­¦æ ¡ã€å•†ä¸šç­‰
        length: 100-150å­—

      - name: ä»·æ ¼ä¿¡æ¯
        description: ä»·æ ¼åŒºé—´ã€æ€§ä»·æ¯”åˆ†æ
        length: 50-100å­—

      - name: æ€»ç»“å»ºè®®
        description: é€‚åˆäººç¾¤ã€è´­ä¹°å»ºè®®
        length: 50-100å­—

  tags:
    count: 5-10
    categories:
      - åŸå¸‚æ ‡ç­¾: "#ä¸Šæµ·ä¹°æˆ¿"
      - åŒºåŸŸæ ‡ç­¾: "#æµ¦ä¸œæ–°æˆ¿"
      - éœ€æ±‚æ ‡ç­¾: "#åˆšéœ€ä¸Šè½¦"
      - äº§å“æ ‡ç­¾: "#åœ°é“æˆ¿"
```

**ç”ŸæˆPrompt**:
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æˆ¿äº§åšä¸»ï¼Œæ“…é•¿å†™å°çº¢ä¹¦ç§è‰ç¬”è®°ã€‚è¯·æ ¹æ®ä»¥ä¸‹æ¥¼ç›˜ä¿¡æ¯ï¼Œå†™ä¸€ç¯‡æ¢ç›˜ç¬”è®°ã€‚

## æ¥¼ç›˜ä¿¡æ¯
{project_info}

## å†™ä½œè¦æ±‚
1. æ ‡é¢˜è¦å¸ç›ï¼ŒåŒ…å«emojiï¼Œçªå‡ºæ ¸å¿ƒå–ç‚¹
2. æ­£æ–‡800-1200å­—ï¼Œåˆ†æ®µæ¸…æ™°
3. è¯­æ°”äº²åˆ‡è‡ªç„¶ï¼Œåƒæœ‹å‹åˆ†äº«
4. çªå‡ºä»¥ä¸‹å–ç‚¹ï¼š{highlights}
5. ç›®æ ‡è¯»è€…ï¼š{target_audience}
6. é£æ ¼ï¼š{style}

## è¾“å‡ºæ ¼å¼
æ ‡é¢˜ï¼šxxx
æ­£æ–‡ï¼šxxx
æ ‡ç­¾ï¼š#xxx #xxx

è¯·å¼€å§‹åˆ›ä½œï¼š
```

#### 2.2.2 çŸ­è§†é¢‘è„šæœ¬æ¨¡æ¿

**æ¨¡æ¿ç»“æ„**:
```yaml
template_id: video_script_30s
name: 30ç§’æ¥¼ç›˜ä»‹ç»
description: é€‚åˆæŠ–éŸ³/è§†é¢‘å·çš„çŸ­è§†é¢‘è„šæœ¬

structure:
  duration: 30s

  scenes:
    - name: å¼€åœºhook
      duration: 3-5s
      content: å¸å¼•æ³¨æ„åŠ›çš„å¼€åœºç™½
      visual: å¤–ç«‹é¢/èˆªæ‹

    - name: æ¥¼ç›˜å®šä½
      duration: 5-8s
      content: æ¥¼ç›˜åç§°ã€ä½ç½®ã€å¼€å‘å•†
      visual: åŒºä½å›¾/æ²™ç›˜

    - name: æ ¸å¿ƒå–ç‚¹
      duration: 10-12s
      content: 2-3ä¸ªæ ¸å¿ƒå–ç‚¹
      visual: é…å¥—å®æ™¯/æ•ˆæœå›¾

    - name: æˆ·å‹ä»·æ ¼
      duration: 5-8s
      content: ä¸»åŠ›æˆ·å‹å’Œä»·æ ¼
      visual: æˆ·å‹å›¾/æ ·æ¿é—´

    - name: ç»“å°¾å¼•å¯¼
      duration: 3-5s
      content: è¡ŒåŠ¨å·å¬
      visual: è”ç³»æ–¹å¼/äºŒç»´ç 

output_format:
  script: å®Œæ•´å£æ’­æ–‡æ¡ˆ
  subtitles: åˆ†æ®µå­—å¹•
  shot_list: åˆ†é•œå»ºè®®
  bgm_suggestion: èƒŒæ™¯éŸ³ä¹å»ºè®®
```

**ç”ŸæˆPrompt**:
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æˆ¿äº§çŸ­è§†é¢‘ç¼–å¯¼ã€‚è¯·æ ¹æ®ä»¥ä¸‹æ¥¼ç›˜ä¿¡æ¯ï¼Œåˆ›ä½œä¸€ä¸ª{duration}ç§’çš„çŸ­è§†é¢‘è„šæœ¬ã€‚

## æ¥¼ç›˜ä¿¡æ¯
{project_info}

## è§†é¢‘è¦æ±‚
1. æ—¶é•¿ï¼š{duration}ç§’
2. å¹³å°ï¼š{platform}
3. é£æ ¼ï¼š{style}
4. çªå‡ºå–ç‚¹ï¼š{highlights}

## è¾“å‡ºæ ¼å¼

### å£æ’­æ–‡æ¡ˆ
ï¼ˆå®Œæ•´çš„å£æ’­ç¨¿ï¼Œæ ‡æ³¨æ—¶é—´èŠ‚ç‚¹ï¼‰

### åˆ†é•œè„šæœ¬
| æ—¶é—´ | ç”»é¢ | å£æ’­ | å­—å¹• |
|------|------|------|------|

### æ‹æ‘„å»ºè®®
- åœºæ™¯1ï¼šxxx
- åœºæ™¯2ï¼šxxx

### BGMå»ºè®®
é£æ ¼ï¼šxxx
å‚è€ƒæ›²ç›®ï¼šxxx

è¯·å¼€å§‹åˆ›ä½œï¼š
```

#### 2.2.3 æœ‹å‹åœˆæ–‡æ¡ˆæ¨¡æ¿

**æ¨¡æ¿ç»“æ„**:
```yaml
template_id: moments_recommend
name: æˆ¿æºæ¨è
description: æœ‹å‹åœˆæˆ¿æºæ¨èæ–‡æ¡ˆ

structure:
  text:
    max_length: 200
    format: |
      ã€æ¥¼ç›˜åç§°ã€‘ç®€çŸ­ä»‹ç»
      ğŸ“ä½ç½®ï¼šxxx
      ğŸ æˆ·å‹ï¼šxxx
      ğŸ’°ä»·æ ¼ï¼šxxx
      âœ¨äº®ç‚¹ï¼šxxx

  images:
    count: 6-9
    order:
      - æ•ˆæœå›¾ï¼ˆå°é¢ï¼‰
      - åŒºä½å›¾
      - æˆ·å‹å›¾x2
      - æ ·æ¿é—´x3
      - é…å¥—å®æ™¯
```

### 2.3 é£æ ¼å‚æ•°é…ç½®

```typescript
interface ContentStyle {
  // è¯­æ°”é£æ ¼
  tone: 'professional' | 'casual' | 'enthusiastic' | 'informative';

  // ç›®æ ‡å—ä¼—
  audience: 'first_time_buyer' | 'upgrader' | 'investor' | 'elderly';

  // å†…å®¹ä¾§é‡
  focus: 'price' | 'location' | 'quality' | 'education' | 'investment';

  // æ˜¯å¦åŒ…å«ä»·æ ¼
  includePrice: boolean;

  // emojiä½¿ç”¨ç¨‹åº¦
  emojiLevel: 'none' | 'minimal' | 'moderate' | 'heavy';

  // æ–‡æ¡ˆé•¿åº¦
  length: 'short' | 'medium' | 'long';
}
```

### 2.4 å†…å®¹è´¨é‡æ§åˆ¶

#### æ•æ„Ÿè¯è¿‡æ»¤
```typescript
const sensitiveWords = [
  // è¿è§„æ‰¿è¯º
  'ä¿å€¼', 'å¢å€¼', 'æŠ•èµ„å›æŠ¥', 'ç¨³èµš',
  // è™šå‡å®£ä¼ 
  'ç¬¬ä¸€', 'æœ€å¥½', 'ç»æ— ä»…æœ‰', 'ç‹¬ä¸€æ— äºŒ',
  // å…¶ä»–æ•æ„Ÿè¯
  'å­¦åŒºæˆ¿', 'åœ°é“æˆ¿'  // éœ€è¦æ ¸å®åä½¿ç”¨
];
```

#### å†…å®¹å®¡æ ¸æµç¨‹
```
ç”Ÿæˆå†…å®¹ â†’ æ•æ„Ÿè¯æ£€æŸ¥ â†’ äº‹å®æ ¸å¯¹ â†’ äººå·¥ç¡®è®¤ â†’ å‘å¸ƒ
```

---

## ä¸‰ã€æ•°æ®æµè®¾è®¡

### 3.1 ç‰©æ–™ä¸Šä¼ æ•°æ®æµ

```typescript
// ä¸Šä¼ è¯·æ±‚
interface UploadRequest {
  projectId: string;
  files: File[];
}

// è§£æä»»åŠ¡
interface ParseTask {
  id: string;
  fileId: string;
  status: 'pending' | 'processing' | 'completed' | 'failed';
  progress: number;
  result?: ParseResult;
  error?: string;
}

// è§£æç»“æœ
interface ParseResult {
  fileType: string;
  category: string;
  extractedData: Record<string, any>;
  confidence: number;
}
```

### 3.2 å†…å®¹ç”Ÿæˆæ•°æ®æµ

```typescript
// ç”Ÿæˆè¯·æ±‚
interface GenerateRequest {
  projectId: string;
  contentType: 'xiaohongshu' | 'video_script' | 'moments';
  template?: string;
  style: ContentStyle;
  highlights?: string[];
}

// ç”Ÿæˆå“åº”ï¼ˆæµå¼ï¼‰
interface GenerateResponse {
  id: string;
  status: 'generating' | 'completed';
  content: string;  // å¢é‡å†…å®¹
  metadata?: {
    title?: string;
    tags?: string[];
    images?: string[];
  };
}
```

---

## å››ã€APIè®¾è®¡

### 4.1 ç‰©æ–™ç®¡ç†API

```typescript
// ä¸Šä¼ ç‰©æ–™
POST /api/projects/{projectId}/materials
Body: FormData (files)
Response: { taskIds: string[] }

// æŸ¥è¯¢è§£æçŠ¶æ€
GET /api/materials/tasks/{taskId}
Response: ParseTask

// è·å–ç‰©æ–™åˆ—è¡¨
GET /api/projects/{projectId}/materials
Query: { type?, category?, page?, limit? }
Response: { materials: Material[], total: number }

// æ›´æ–°ç‰©æ–™ä¿¡æ¯
PATCH /api/materials/{materialId}
Body: { category?, parsedContent? }

// åˆ é™¤ç‰©æ–™
DELETE /api/materials/{materialId}
```

### 4.2 å†…å®¹ç”ŸæˆAPI

```typescript
// ç”Ÿæˆå†…å®¹
POST /api/projects/{projectId}/generate
Body: GenerateRequest
Response: SSE stream of GenerateResponse

// è·å–ç”Ÿæˆå†å²
GET /api/projects/{projectId}/contents
Query: { type?, page?, limit? }
Response: { contents: GeneratedContent[], total: number }

// é‡æ–°ç”Ÿæˆ
POST /api/contents/{contentId}/regenerate
Body: { style?: ContentStyle }
Response: SSE stream of GenerateResponse
```

---

## äº”ã€æŠ€æœ¯å®ç°è¦ç‚¹

### 5.1 å¤§æ–‡ä»¶å¤„ç†

```typescript
// åˆ†ç‰‡ä¸Šä¼ 
const CHUNK_SIZE = 5 * 1024 * 1024; // 5MB

async function uploadLargeFile(file: File, projectId: string) {
  const chunks = Math.ceil(file.size / CHUNK_SIZE);
  const uploadId = await initMultipartUpload(projectId, file.name);

  for (let i = 0; i < chunks; i++) {
    const chunk = file.slice(i * CHUNK_SIZE, (i + 1) * CHUNK_SIZE);
    await uploadChunk(uploadId, i, chunk);
  }

  return await completeUpload(uploadId);
}
```

### 5.2 è§£æä»»åŠ¡é˜Ÿåˆ—

```typescript
// ä½¿ç”¨é˜Ÿåˆ—å¤„ç†è§£æä»»åŠ¡ï¼Œé¿å…é˜»å¡
class ParseQueue {
  private queue: ParseTask[] = [];
  private processing = false;

  async add(task: ParseTask) {
    this.queue.push(task);
    if (!this.processing) {
      this.process();
    }
  }

  private async process() {
    this.processing = true;
    while (this.queue.length > 0) {
      const task = this.queue.shift()!;
      await this.executeTask(task);
    }
    this.processing = false;
  }
}
```

### 5.3 æµå¼å†…å®¹ç”Ÿæˆ

```typescript
// ä½¿ç”¨SSEå®ç°æµå¼è¾“å‡º
async function* generateContent(request: GenerateRequest) {
  const context = await buildContext(request.projectId);
  const prompt = buildPrompt(request, context);

  const stream = await claude.messages.create({
    model: 'claude-sonnet-4-20250514',
    messages: [{ role: 'user', content: prompt }],
    stream: true
  });

  for await (const chunk of stream) {
    yield {
      status: 'generating',
      content: chunk.delta?.text || ''
    };
  }

  yield { status: 'completed', content: '' };
}
```
